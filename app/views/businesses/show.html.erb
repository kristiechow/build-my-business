<section>

  <div class='info'>
    <ul>
      <li>
        <h4> <%=@business.name%> </h4>
      </li>

      <li>
        <h3 class= "titles">  Owner: <%= link_to @business.owner.first_name, owner_path(@business.owner) %></h3>
      </li>
      <li>
        <h4 class= >Location: <%=@business.location%></h4>
      </li>
      <li>
        <h4>Description: <%=@business.description%></h4>
      </li>
    </ul>

    <ul> Categories:
    <% @business.categories.each do |cat| %>
      <li><h5><%= cat.name %></h5></li>
    <% end %>
    </ul>
  </div>

  <div class='business-images'>
    <% @business.photos.each do |photo| %>
     <div >
       <%=image_tag photo.image.url(:square), class: "biz-pic" %>
     </div>
    <% end %>
  </div>

  <div>
    <% if @business.editable_by? current_user %>
      <%= link_to 'edit', edit_business_path(@business)%>
      <%= link_to 'submit an update', new_business_status_update_path(@business) %>
    <% end %>
  </div>


  <%= render partial: 'partials/matching', locals: { user: @owner }%>

  <div>
    <h4>Status: <%=@business.status %></h4>
  </div>

  <% @business.status_updates.each do |update| %>
    <%= render partial: 'partials/status_update', locals: { business: @business }%>
  <% end %>

  <div id='business-location'>
    <div style='width: 800px;'>
      <div id="map" style='width: 800px; height: 400px;'></div>
    </div>
  </div>

  <script type="text/javascript">
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
     markers = handler.addMarkers(<%=raw @map_data.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    });
  </script>


</section>
